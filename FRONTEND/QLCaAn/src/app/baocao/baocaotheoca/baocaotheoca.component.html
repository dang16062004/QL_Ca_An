<h2 class="text-center font-weight-bold mb-4">Thống kê ăn ca hằng ngày</h2>

<!-- Form chọn ngày & ca ăn -->
<div class="form-inline justify-content-center mb-4">
  <div class="form-group mr-3">
    <label class="mr-2"><strong>Nhập ngày ăn</strong></label>
    <input
      type="date"
      class="form-control"
      [(ngModel)]="ngayChon"
      name="ngayChon"
    />
  </div>

  <div class="form-group mr-3">
    <label class="mr-2"><strong>Nhập ca ăn</strong></label>
    <select class="form-control" [(ngModel)]="caChon" name="caChon">
      <option [ngValue]="null" disabled selected>-- Chọn ca --</option>
      <option [value]="1">Ca 1</option>
      <option [value]="2">Ca 2</option>
      <option [value]="3">Ca 3</option>
    </select>
  </div>

  <button class="btn btn-success" (click)="timBaoCao()">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="16"
      fill="currentColor"
      class="bi bi-search"
      viewBox="0 0 16 16"
    >
      <path
        d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"
      />
    </svg>
    Tìm kiếm
  </button>
</div>

<!-- Tổng toàn bộ -->
<p><strong>Tổng số suất: </strong> {{ getTongSoLuongTatCa() }}</p>

<!-- Duyệt từng phòng ban -->
<div *ngFor="let phong of objectKeys(dsTheoPhong)">
  <h5>
    <strong>Phòng: {{ phong }}</strong>
  </h5>

  <table class="table table-bordered text-center">
    <thead class="thead-light">
      <tr>
        <th>STT</th>
        <th>Họ tên người đăng ký</th>
        <th>Số lượng</th>
        <th>Thành tiền</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of dsTheoPhong[phong]; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ item.HoVaTen }}</td>
        <td>{{ item.SoLuong }}</td>
        <td>{{ item.ThanhTien | number : "1.0-0" }}</td>
      </tr>
      <!-- Tổng của phòng -->
      <tr class="font-weight-bold">
        <td colspan="2">Tổng</td>
        <td>{{ getTongSoLuong(dsTheoPhong[phong]) }}</td>
        <td>{{ getTongThanhTien(dsTheoPhong[phong]) | number : "1.0-0" }}</td>
      </tr>
    </tbody>
  </table>
</div>
